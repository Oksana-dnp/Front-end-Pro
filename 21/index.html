<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .invalidValue {
            outline: none;
            border: 3px solid red;
        }

        .validValue {
            outline: none;
            border: 3px solid rgb(6, 238, 6);
        }
    </style>

</head>

<body>




    <input type="text" data-name="first" data-sum="sum-input">
    <input type="text" data-name="second" data-sum="sum-input">
    <input type="text" data-name="third" data-sum="sum-input">
    <input type="button" value="Sum" data-submit="totalSum">
    <input type="text" data-name="allSumInput">





    <br>
    <br>
    <br>

    <input type="text" data-name="sumInput"><br>
    <span class='valid-title' data-name='validTitle'></span>

    <script>

        //task 1
        const sumInputArray = document.querySelectorAll('input[data-sum="sum-input"]')

        const firstInput = document.querySelector('input[data-name="first"]');
        const secondInput = document.querySelector('input[data-name="second"]');
        const thirdInput = document.querySelector('input[data-name="third"]');
        const allSumInput = document.querySelector('input[data-name="allSumInput"]');

        const submitBtn = document.querySelector('input[data-submit="totalSum"]');


        firstInput.addEventListener('change', getValue)
        secondInput.addEventListener('change', getValue)
        thirdInput.addEventListener('change', getValue)
        submitBtn.addEventListener('click', getSum)


        var sumArray = []
        function getValue(e) {
            e.target.classList.remove('validValue');
            e.target.classList.remove('invalidValue')
            let item = e.target.value.trim()
            if (!isNaN(+item) || !item === '') {
                sumArray.push(+item)
                e.target.classList.add('validValue')
            } else {
                e.target.classList.add('invalidValue')
                alert('Вы ввели  не число! Введите число!')
            }
        }

        function getSum() {
            if (sumArray.length === sumInputArray.length) {
                allSumInput.value = sumArray.reduce((sum, accum) => sum + accum, 0)
                sumArray = []
            } else {
                alert('Для подсчета суммы введите все три значения!')
            }
        }



        //task 2
        const sumInput = document.querySelector('input[data-name="sumInput"]');
        const validTitle = document.querySelector('span[data-name="validTitle"]')

        sumInput.addEventListener('blur', (e) => {
            var sumArgements = e.target.value.trim();
            var totalSum = 0;
            if (!sumArgements === '' || !isNaN(+sumArgements)) {
                for (i = 0; i < sumArgements.length; i++) {
                    var argValue = Number(sumArgements[i]);
                    totalSum = totalSum + argValue;
                    e.target.value = totalSum
                }
            } else {
                e.target.classList.add('invalidValue');
                validTitle.textContent = 'Неверный ввод. Введите число!'
            }
        })

    </script>


</body>

</html>